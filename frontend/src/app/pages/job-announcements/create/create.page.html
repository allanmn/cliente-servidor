<ion-header>
  <ion-toolbar mode="ios">
    <ion-buttons slot="start">
      <ion-back-button
        mode="ios"
        text=""
        color="dark"
        [routerLink]="['/job-announcements']"
        routerLink="back"
      >
      </ion-back-button>
    </ion-buttons>
    <ion-title (click)="debug()"
      >{{ editing ? 'Editando' : 'Nova' }} Vaga
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-row>
    <ion-col class="ion-no-padding">
      <div>
        <ion-col class="ion-no-padding">
          <ion-card class="m0" color="tertiary" mode="ios">
            <ion-card-content>
              <ion-row>
                <ion-col size="6">
                  <ion-label class="fw-600" color="medium">Título*</ion-label>
                  <ion-input
                    type="text"
                    class="input-light"
                    [(ngModel)]="jobAnnouncement.titulo"
                  >
                  </ion-input>
                </ion-col>
                <ion-col size="6">
                  <ion-label class="fw-600" color="medium">Ramo*</ion-label>
                  <div class="input-light p6 br6" (click)="selectJobSector()">
                    <span *ngIf="jobAnnouncement.ramo">
                      {{ jobAnnouncement.ramo.nome }}
                    </span>
                    <span *ngIf="!jobAnnouncement.ramo">
                      Selecione um ramo
                    </span>
                  </div>
                </ion-col>
                <ion-col size="12" size-sm="3">
                  <ion-label class="fw-600" color="medium">&nbsp;</ion-label>
                  <ion-item mode="md" class="no-border br6">
                    <ion-toggle
                      slot="start"
                      mode="md"
                      color="success"
                      [(ngModel)]="jobAnnouncement.ativo"
                    ></ion-toggle>
                    <ion-label
                      (click)="jobAnnouncement.ativo = !jobAnnouncement.ativo"
                      >Vaga {{ jobAnnouncement.ativo ? 'disponível' :
                      'indisponível' }}</ion-label
                    >
                  </ion-item>
                </ion-col>
                <ion-col size="12" size-sm="3">
                  <ion-label class="fw-600" color="medium"
                    >Anos de Exp*</ion-label
                  >
                  <ion-input
                    type="number"
                    class="input-light"
                    [(ngModel)]="jobAnnouncement.experiencia"
                  >
                  </ion-input>
                </ion-col>
                <ion-col size="12" size-md="6">
                  <ion-label class="fw-600" color="medium">
                    Competências*
                  </ion-label>
                  <ion-item
                    mode="md"
                    class="input-select"
                    lines="none"
                    (click)="selectSkills()"
                  >
                    <ion-text *ngIf="jobAnnouncement.competencias.length == 0">
                      Selecione uma ou mais competências
                    </ion-text>
                    <ion-badge
                      color="primary"
                      class="p5 mr-5"
                      *ngFor="let skill of jobAnnouncement.competencias"
                      >{{ skill.nome }}</ion-badge
                    >
                  </ion-item>
                </ion-col>
                <ion-col size="12" size-sm="6">
                  <ion-label class="fw-600" color="medium"
                    >Salário Min*</ion-label
                  >
                  <input
                    type="text"
                    class="input-light"
                    currencyMask
                    [(ngModel)]="jobAnnouncement.salario_min"
                  />
                </ion-col>
                <ion-col size="12" size-sm="6">
                  <ion-label class="fw-600" color="medium"
                    >Salário Max</ion-label
                  >
                  <input
                    type="text"
                    class="input-light"
                    currencyMask
                    [(ngModel)]="jobAnnouncement.salario_max"
                  />
                </ion-col>
                <ion-col size="12">
                  <ion-label class="input-label"> Descrição </ion-label>
                  <ion-textarea
                    rows="3"
                    type="text"
                    placeholder="Descrição"
                    class="input-light"
                    [(ngModel)]="jobAnnouncement.descricao"
                  >
                  </ion-textarea>
                </ion-col>
              </ion-row>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </div>

      <ion-row class="mt-20">
        <ion-col size="12" size-sm="4">
          <ion-button
            (click)="save()"
            expand="full"
            shape="round"
            mode="ios"
            color="success"
          >
            Salvar
          </ion-button>
        </ion-col>
      </ion-row>
    </ion-col>
  </ion-row>
</ion-content>
